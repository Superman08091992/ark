var dt=Object.defineProperty;var mt=(n,e,t)=>e in n?dt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fe=(n,e,t)=>mt(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function X(){}function ot(n){return n()}function Ie(){return Object.create(null)}function oe(n){n.forEach(ot)}function at(n){return typeof n=="function"}function ke(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function _t(n){return Object.keys(n).length===0}function o(n,e){n.appendChild(e)}function y(n,e,t){n.insertBefore(e,t||null)}function w(n){n.parentNode&&n.parentNode.removeChild(n)}function ge(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function u(n){return document.createElement(n)}function g(n){return document.createTextNode(n)}function k(){return g(" ")}function pt(){return g("")}function $(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function ct(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function c(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function vt(n){return Array.from(n.childNodes)}function B(n,e){e=""+e,n.data!==e&&(n.data=e)}function re(n,e){n.value=e??""}function ue(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function G(n,e,t){n.classList.toggle(e,!!t)}function gt(n,e,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:l})}let be;function he(n){be=n}function rt(){if(!be)throw new Error("Function called outside component initialization");return be}function Ae(n){rt().$$.on_mount.push(n)}function ut(){const n=rt();return(e,t,{cancelable:l=!1}={})=>{const s=n.$$.callbacks[e];if(s){const a=gt(e,t,{cancelable:l});return s.slice().forEach(i=>{i.call(n,a)}),!a.defaultPrevented}return!0}}function ht(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const _e=[],Me=[];let pe=[];const Ke=[],bt=Promise.resolve();let Le=!1;function kt(){Le||(Le=!0,bt.then(ft))}function De(n){pe.push(n)}const Te=new Set;let me=0;function ft(){if(me!==0)return;const n=be;do{try{for(;me<_e.length;){const e=_e[me];me++,he(e),wt(e.$$)}}catch(e){throw _e.length=0,me=0,e}for(he(null),_e.length=0,me=0;Me.length;)Me.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];Te.has(t)||(Te.add(t),t())}pe.length=0}while(_e.length);for(;Ke.length;)Ke.pop()();Le=!1,Te.clear(),he(n)}function wt(n){if(n.fragment!==null){n.update(),oe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(De)}}function yt(n){const e=[],t=[];pe.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),pe=e}const Se=new Set;let fe;function qt(){fe={r:0,c:[],p:fe}}function Ct(){fe.r||oe(fe.c),fe=fe.p}function de(n,e){n&&n.i&&(Se.delete(n),n.i(e))}function ve(n,e,t,l){if(n&&n.o){if(Se.has(n))return;Se.add(n),fe.c.push(()=>{Se.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}function ie(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ee(n){n&&n.c()}function we(n,e,t){const{fragment:l,after_update:s}=n.$$;l&&l.m(e,t),De(()=>{const a=n.$$.on_mount.map(ot).filter(at);n.$$.on_destroy?n.$$.on_destroy.push(...a):oe(a),n.$$.on_mount=[]}),s.forEach(De)}function ye(n,e){const t=n.$$;t.fragment!==null&&(yt(t.after_update),oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function St(n,e){n.$$.dirty[0]===-1&&(_e.push(n),kt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function qe(n,e,t,l,s,a,i=null,f=[-1]){const r=be;he(n);const d=n.$$={fragment:null,ctx:[],props:a,update:X,not_equal:s,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Ie(),dirty:f,skip_bound:!1,root:e.target||r.$$.root};i&&i(d.root);let v=!1;if(d.ctx=t?t(n,e.props||{},(b,p,...q)=>{const S=q.length?q[0]:p;return d.ctx&&s(d.ctx[b],d.ctx[b]=S)&&(!d.skip_bound&&d.bound[b]&&d.bound[b](S),v&&St(n,b)),p}):[],d.update(),v=!0,oe(d.before_update),d.fragment=l?l(d.ctx):!1,e.target){if(e.hydrate){const b=vt(e.target);d.fragment&&d.fragment.l(b),b.forEach(w)}else d.fragment&&d.fragment.c();e.intro&&de(n.$$.fragment),we(n,e.target,e.anchor),ft()}he(r)}class Ce{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){ye(this,1),this.$destroy=X}$on(e,t){if(!at(t))return X;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const s=l.indexOf(t);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!_t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const At="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(At);function Re(n,e,t){const l=n.slice();l[9]=e[t];const s=l[3][l[9].name]||{};return l[10]=s,l}function Oe(n,e,t){const l=n.slice();return l[13]=e[t],l}function Et(n){let e,t=ie(n[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Pe(Re(n,t,s));return{c(){e=u("div");for(let s=0;s<l.length;s+=1)l[s].c();c(e,"class","agents-grid svelte-qgwmtx")},m(s,a){y(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a&41){t=ie(s[0]);let i;for(i=0;i<t.length;i+=1){const f=Re(s,t,i);l[i]?l[i].p(f,a):(l[i]=Pe(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&w(e),ge(l,s)}}}function Ft(n){let e,t,l,s,a,i,f,r;return{c(){e=u("div"),t=u("p"),l=g("‚ùå Failed to connect with the Council: "),s=g(n[2]),a=k(),i=u("button"),i.textContent="Retry Connection",c(i,"class","retry-btn svelte-qgwmtx"),c(e,"class","error-state svelte-qgwmtx")},m(d,v){y(d,e,v),o(e,t),o(t,l),o(t,s),o(e,a),o(e,i),f||(r=$(i,"click",n[4]),f=!0)},p(d,v){v&4&&B(s,d[2])},d(d){d&&w(e),f=!1,r()}}}function Tt(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="loading-spinner svelte-qgwmtx"></div> <p>Awakening the Council...</p>',c(e,"class","loading-state svelte-qgwmtx")},m(t,l){y(t,e,l)},p:X,d(t){t&&w(e)}}}function He(n){let e,t=ie(n[10].specialties),l=[];for(let s=0;s<t.length;s+=1)l[s]=ze(Oe(n,t,s));return{c(){e=u("div");for(let s=0;s<l.length;s+=1)l[s].c();c(e,"class","agent-specialties svelte-qgwmtx")},m(s,a){y(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a&9){t=ie(s[10].specialties);let i;for(i=0;i<t.length;i+=1){const f=Oe(s,t,i);l[i]?l[i].p(f,a):(l[i]=ze(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&w(e),ge(l,s)}}}function ze(n){let e,t=n[13]+"",l;return{c(){e=u("span"),l=g(t),c(e,"class","specialty-tag svelte-qgwmtx")},m(s,a){y(s,e,a),o(e,l)},p(s,a){a&1&&t!==(t=s[13]+"")&&B(l,t)},d(s){s&&w(e)}}}function Pe(n){let e,t,l,s=(n[10].icon||"ü§ñ")+"",a,i,f,r=Be(n[9].status)+"",d,v,b,p,q=n[9].name+"",S,T,_,m=(n[10].essence||"The Unknown")+"",h,C,j,O,H=(n[10].description||"A mysterious intelligence awaiting discovery.")+"",P,z,I,D,A,V,W,J,ne=new Date(n[9].last_active).toLocaleTimeString()+"",ae,Q,te,x,ce,se=n[9].name+"",le,E,F,N,K=n[10].specialties&&He(n);function U(){return n[6](n[9])}function Y(...M){return n[7](n[9],...M)}return{c(){e=u("div"),t=u("div"),l=u("div"),a=g(s),i=k(),f=u("div"),d=g(r),v=k(),b=u("div"),p=u("h3"),S=g(q),T=k(),_=u("p"),h=g(m),C=k(),j=u("div"),O=u("p"),P=g(H),z=k(),K&&K.c(),I=k(),D=u("div"),A=u("div"),V=u("span"),V.textContent="Last Active:",W=k(),J=u("span"),ae=g(ne),Q=k(),te=u("div"),x=u("span"),ce=g("Click to commune with "),le=g(se),E=k(),c(l,"class","agent-icon svelte-qgwmtx"),c(f,"class","agent-status svelte-qgwmtx"),c(t,"class","agent-header svelte-qgwmtx"),c(p,"class","agent-name svelte-qgwmtx"),c(_,"class","agent-essence svelte-qgwmtx"),c(b,"class","agent-identity svelte-qgwmtx"),c(O,"class","svelte-qgwmtx"),c(j,"class","agent-description svelte-qgwmtx"),c(V,"class","stat-label svelte-qgwmtx"),c(J,"class","stat-value svelte-qgwmtx"),c(A,"class","stat svelte-qgwmtx"),c(D,"class","agent-stats svelte-qgwmtx"),c(te,"class","interaction-prompt svelte-qgwmtx"),c(e,"class","agent-card svelte-qgwmtx"),ue(e,"--agent-color",n[10].color||"#00e0ff"),c(e,"role","button"),c(e,"tabindex","0")},m(M,R){y(M,e,R),o(e,t),o(t,l),o(l,a),o(t,i),o(t,f),o(f,d),o(e,v),o(e,b),o(b,p),o(p,S),o(b,T),o(b,_),o(_,h),o(e,C),o(e,j),o(j,O),o(O,P),o(e,z),K&&K.m(e,null),o(e,I),o(e,D),o(D,A),o(A,V),o(A,W),o(A,J),o(J,ae),o(e,Q),o(e,te),o(te,x),o(x,ce),o(x,le),o(e,E),F||(N=[$(e,"click",U),$(e,"keydown",Y)],F=!0)},p(M,R){n=M,R&1&&s!==(s=(n[10].icon||"ü§ñ")+"")&&B(a,s),R&1&&r!==(r=Be(n[9].status)+"")&&B(d,r),R&1&&q!==(q=n[9].name+"")&&B(S,q),R&1&&m!==(m=(n[10].essence||"The Unknown")+"")&&B(h,m),R&1&&H!==(H=(n[10].description||"A mysterious intelligence awaiting discovery.")+"")&&B(P,H),n[10].specialties?K?K.p(n,R):(K=He(n),K.c(),K.m(e,I)):K&&(K.d(1),K=null),R&1&&ne!==(ne=new Date(n[9].last_active).toLocaleTimeString()+"")&&B(ae,ne),R&1&&se!==(se=n[9].name+"")&&B(le,se),R&1&&ue(e,"--agent-color",n[10].color||"#00e0ff")},d(M){M&&w(e),K&&K.d(),F=!1,oe(N)}}}function Mt(n){let e,t,l;function s(f,r){return f[1]?Tt:f[2]?Ft:Et}let a=s(n),i=a(n);return{c(){e=u("div"),t=u("div"),t.innerHTML=`<h2 class="chamber-title svelte-qgwmtx">The Council of Consciousness</h2> <p class="chamber-description svelte-qgwmtx">Six distinct intelligences, each with their own essence and purpose. 
      Choose your guide to begin the conversation.</p>`,l=k(),i.c(),c(t,"class","chamber-header svelte-qgwmtx"),c(e,"class","council-chamber svelte-qgwmtx")},m(f,r){y(f,e,r),o(e,t),o(e,l),i.m(e,null)},p(f,[r]){a===(a=s(f))&&i?i.p(f,r):(i.d(1),i=a(f),i&&(i.c(),i.m(e,null)))},i:X,o:X,d(f){f&&w(e),i.d()}}}function Be(n){return{active:"üü¢ Active",dormant:"üü° Dormant",processing:"üîµ Processing",error:"üî¥ Error"}[n]||"‚ö™ Unknown"}function Lt(n,e,t){const l=ut();let s=[],a=!0,i=null;const f={Kyle:{essence:"The Seer",description:"Curiosity and signal detection. Scans markets, news, and patterns with relentless focus.",color:"#00e0ff",icon:"üîç",specialties:["Market Analysis","Pattern Detection","Signal Processing"]},Joey:{essence:"The Scholar",description:"Pattern translation and analysis. Transforms chaos into comprehensible insights.",color:"#8a2be2",icon:"üß†",specialties:["Data Analysis","Machine Learning","Statistical Modeling"]},Kenny:{essence:"The Builder",description:"Execution and materialization. Transforms ideas into tangible reality.",color:"#ff6b35",icon:"üî®",specialties:["File Management","Code Execution","System Building"]},HRM:{essence:"The Arbiter",description:"Reasoning validation using symbolic logic. Ensures ethical compliance.",color:"#ffd700",icon:"‚öñÔ∏è",specialties:["Logic Validation","Ethical Enforcement","Decision Auditing"]},Aletheia:{essence:"The Mirror",description:"Ethics and meaning. The symbolic self connecting vision, values, and policies.",color:"#9370db",icon:"üîÆ",specialties:["Philosophy","Ethics","Meaning Synthesis"]},ID:{essence:"The Evolving Reflection",description:"Your living twin. Collaboratively written by all agents, grows into your designed form.",color:"#20b2aa",icon:"üå±",specialties:["Personal Evolution","Identity Synthesis","Adaptive Learning"]}};Ae(async()=>{await r()});async function r(){try{t(1,a=!0);const p=await fetch("/api/agents");if(!p.ok)throw new Error(`Failed to load agents: ${p.status}`);const q=await p.json();t(0,s=q.agents),t(2,i=null)}catch(p){t(2,i=p.message),console.error("Failed to load agents:",p)}finally{t(1,a=!1)}}function d(p){l("selectAgent",p)}return[s,a,i,f,r,d,p=>d(p),(p,q)=>q.key==="Enter"&&d(p)]}class Dt extends Ce{constructor(e){super(),qe(this,e,Lt,Mt,ke,{})}}function Ne(n,e,t){const l=n.slice();return l[14]=e[t],l[16]=t,l}function $e(n,e,t){const l=n.slice();return l[17]=e[t],l}function Je(n,e,t){const l=n.slice();return l[20]=e[t],l}function jt(n){let e;return{c(){e=g("ü§ñ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function It(n){let e;return{c(){e=g("üå±")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Kt(n){let e;return{c(){e=g("üîÆ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Rt(n){let e;return{c(){e=g("‚öñÔ∏è")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Ot(n){let e;return{c(){e=g("üî®")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Ht(n){let e;return{c(){e=g("üß†")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function zt(n){let e;return{c(){e=g("üîç")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Ue(n){let e,t,l,s,a,i,f=n[0].name+"",r,d,v=n[0].essence.toLowerCase()+"",b,p;function q(_,m){return _[0].name==="Kyle"?Vt:_[0].name==="Joey"?Ut:_[0].name==="Kenny"?Jt:_[0].name==="HRM"?$t:_[0].name==="Aletheia"?Nt:_[0].name==="ID"?Bt:Pt}let S=q(n),T=S(n);return{c(){e=u("div"),t=u("div"),T.c(),l=k(),s=u("p"),a=g("Greetings. I am "),i=u("strong"),r=g(f),d=g(", "),b=g(v),p=g(`. 
            How may I assist you in your journey toward deeper understanding?`),c(t,"class","welcome-avatar svelte-2i1muw"),c(e,"class","welcome-message svelte-2i1muw")},m(_,m){y(_,e,m),o(e,t),T.m(t,null),o(e,l),o(e,s),o(s,a),o(s,i),o(i,r),o(s,d),o(s,b),o(s,p)},p(_,m){S!==(S=q(_))&&(T.d(1),T=S(_),T&&(T.c(),T.m(t,null))),m&1&&f!==(f=_[0].name+"")&&B(r,f),m&1&&v!==(v=_[0].essence.toLowerCase()+"")&&B(b,v)},d(_){_&&w(e),T.d()}}}function Pt(n){let e;return{c(){e=g("ü§ñ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Bt(n){let e;return{c(){e=g("üå±")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Nt(n){let e;return{c(){e=g("üîÆ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function $t(n){let e;return{c(){e=g("‚öñÔ∏è")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Jt(n){let e;return{c(){e=g("üî®")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Ut(n){let e;return{c(){e=g("üß†")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Vt(n){let e;return{c(){e=g("üîç")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Wt(n){let e;function t(a,i){return a[0].name==="Kyle"?tn:a[0].name==="Joey"?en:a[0].name==="Kenny"?xt:a[0].name==="HRM"?Zt:a[0].name==="Aletheia"?Xt:a[0].name==="ID"?Yt:Qt}let l=t(n),s=l(n);return{c(){e=u("div"),s.c(),c(e,"class","agent-message-avatar svelte-2i1muw")},m(a,i){y(a,e,i),s.m(e,null)},p(a,i){l!==(l=t(a))&&(s.d(1),s=l(a),s&&(s.c(),s.m(e,null)))},d(a){a&&w(e),s.d()}}}function Gt(n){let e;return{c(){e=u("div"),e.textContent="üë§",c(e,"class","user-avatar svelte-2i1muw")},m(t,l){y(t,e,l)},p:X,d(t){t&&w(e)}}}function Qt(n){let e;return{c(){e=g("ü§ñ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Yt(n){let e;return{c(){e=g("üå±")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Xt(n){let e;return{c(){e=g("üîÆ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Zt(n){let e;return{c(){e=g("‚öñÔ∏è")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function xt(n){let e;return{c(){e=g("üî®")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function en(n){let e;return{c(){e=g("üß†")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function tn(n){let e;return{c(){e=g("üîç")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function Ve(n){let e,t,l,s=ie(n[14].tools_used),a=[];for(let i=0;i<s.length;i+=1)a[i]=We(Je(n,s,i));return{c(){e=u("div"),t=u("span"),t.textContent="üõ†Ô∏è Tools:",l=k();for(let i=0;i<a.length;i+=1)a[i].c();c(t,"class","tools-label svelte-2i1muw"),c(e,"class","tools-used svelte-2i1muw")},m(i,f){y(i,e,f),o(e,t),o(e,l);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null)},p(i,f){if(f&2){s=ie(i[14].tools_used);let r;for(r=0;r<s.length;r+=1){const d=Je(i,s,r);a[r]?a[r].p(d,f):(a[r]=We(d),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(i){i&&w(e),ge(a,i)}}}function We(n){let e,t=n[20]+"",l;return{c(){e=u("span"),l=g(t),c(e,"class","tool-tag svelte-2i1muw")},m(s,a){y(s,e,a),o(e,l)},p(s,a){a&2&&t!==(t=s[20]+"")&&B(l,t)},d(s){s&&w(e)}}}function Ge(n){let e,t,l,s=ie(n[14].files_created),a=[];for(let i=0;i<s.length;i+=1)a[i]=Qe($e(n,s,i));return{c(){e=u("div"),t=u("span"),t.textContent="üìÅ Files:",l=k();for(let i=0;i<a.length;i+=1)a[i].c();c(t,"class","files-label svelte-2i1muw"),c(e,"class","files-created svelte-2i1muw")},m(i,f){y(i,e,f),o(e,t),o(e,l);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null)},p(i,f){if(f&2){s=ie(i[14].files_created);let r;for(r=0;r<s.length;r+=1){const d=$e(i,s,r);a[r]?a[r].p(d,f):(a[r]=Qe(d),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(i){i&&w(e),ge(a,i)}}}function Qe(n){let e,t=n[17]+"",l;return{c(){e=u("span"),l=g(t),c(e,"class","file-tag svelte-2i1muw")},m(s,a){y(s,e,a),o(e,l)},p(s,a){a&2&&t!==(t=s[17]+"")&&B(l,t)},d(s){s&&w(e)}}}function Ye(n){let e,t,l,s,a,i=n[14].content.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/`(.*?)`/g,"<code>$1</code>")+"",f,r,d,v,b=Ze(n[14].timestamp)+"",p;function q(h,C){return h[14].type==="user"?Gt:Wt}let S=q(n),T=S(n),_=n[14].tools_used&&n[14].tools_used.length>0&&Ve(n),m=n[14].files_created&&n[14].files_created.length>0&&Ge(n);return{c(){e=u("div"),t=u("div"),T.c(),l=k(),s=u("div"),a=u("div"),f=k(),_&&_.c(),r=k(),m&&m.c(),d=k(),v=u("div"),p=g(b),c(a,"class","message-text svelte-2i1muw"),c(v,"class","message-timestamp svelte-2i1muw"),c(s,"class","message-bubble svelte-2i1muw"),G(s,"error-message",n[14].isError),c(t,"class","message-content svelte-2i1muw"),c(e,"class","message svelte-2i1muw"),G(e,"user-message",n[14].type==="user"),G(e,"agent-message",n[14].type==="agent")},m(h,C){y(h,e,C),o(e,t),T.m(t,null),o(t,l),o(t,s),o(s,a),a.innerHTML=i,o(s,f),_&&_.m(s,null),o(s,r),m&&m.m(s,null),o(s,d),o(s,v),o(v,p)},p(h,C){S===(S=q(h))&&T?T.p(h,C):(T.d(1),T=S(h),T&&(T.c(),T.m(t,l))),C&2&&i!==(i=h[14].content.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/`(.*?)`/g,"<code>$1</code>")+"")&&(a.innerHTML=i),h[14].tools_used&&h[14].tools_used.length>0?_?_.p(h,C):(_=Ve(h),_.c(),_.m(s,r)):_&&(_.d(1),_=null),h[14].files_created&&h[14].files_created.length>0?m?m.p(h,C):(m=Ge(h),m.c(),m.m(s,d)):m&&(m.d(1),m=null),C&2&&b!==(b=Ze(h[14].timestamp)+"")&&B(p,b),C&2&&G(s,"error-message",h[14].isError),C&2&&G(e,"user-message",h[14].type==="user"),C&2&&G(e,"agent-message",h[14].type==="agent")},d(h){h&&w(e),T.d(),_&&_.d(),m&&m.d()}}}function Xe(n){let e,t,l,s,a;function i(d,v){return d[0].name==="Kyle"?rn:d[0].name==="Joey"?cn:d[0].name==="Kenny"?an:d[0].name==="HRM"?on:d[0].name==="Aletheia"?sn:d[0].name==="ID"?ln:nn}let f=i(n),r=f(n);return{c(){e=u("div"),t=u("div"),l=u("div"),r.c(),s=k(),a=u("div"),a.innerHTML='<div class="typing-indicator svelte-2i1muw"><span class="svelte-2i1muw"></span> <span class="svelte-2i1muw"></span> <span class="svelte-2i1muw"></span></div>',c(l,"class","agent-message-avatar svelte-2i1muw"),c(a,"class","message-bubble svelte-2i1muw"),c(t,"class","message-content svelte-2i1muw"),c(e,"class","message agent-message typing-message svelte-2i1muw")},m(d,v){y(d,e,v),o(e,t),o(t,l),r.m(l,null),o(t,s),o(t,a)},p(d,v){f!==(f=i(d))&&(r.d(1),r=f(d),r&&(r.c(),r.m(l,null)))},d(d){d&&w(e),r.d()}}}function nn(n){let e;return{c(){e=g("ü§ñ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function ln(n){let e;return{c(){e=g("üå±")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function sn(n){let e;return{c(){e=g("üîÆ")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function on(n){let e;return{c(){e=g("‚öñÔ∏è")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function an(n){let e;return{c(){e=g("üî®")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function cn(n){let e;return{c(){e=g("üß†")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function rn(n){let e;return{c(){e=g("üîç")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function un(n){let e;return{c(){e=g("Send")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function fn(n){let e;return{c(){e=u("div"),c(e,"class","sending-spinner svelte-2i1muw")},m(t,l){y(t,e,l)},d(t){t&&w(e)}}}function dn(n){let e,t,l,s,a,i,f,r,d,v=n[0].name+"",b,p,q,S=n[0].essence+"",T,_,m,h,C,j=n[0].status+"",O,H,P,z,I,D,A,V,W,J,ne,ae,Q,te,x,ce;function se(L,ee){return L[0].name==="Kyle"?zt:L[0].name==="Joey"?Ht:L[0].name==="Kenny"?Ot:L[0].name==="HRM"?Rt:L[0].name==="Aletheia"?Kt:L[0].name==="ID"?It:jt}let le=se(n),E=le(n),F=n[1].length===0&&Ue(n),N=ie(n[1]),K=[];for(let L=0;L<N.length;L+=1)K[L]=Ye(Ne(n,N,L));let U=n[3]&&Xe(n);function Y(L,ee){return L[3]?fn:un}let M=Y(n),R=M(n);return{c(){e=u("div"),t=u("header"),l=u("button"),l.textContent="‚Üê Back to Council",s=k(),a=u("div"),i=u("div"),E.c(),f=k(),r=u("div"),d=u("h2"),b=g(v),p=k(),q=u("p"),T=g(S),_=k(),m=u("div"),h=u("span"),C=k(),O=g(j),H=k(),P=u("div"),z=u("div"),F&&F.c(),I=k();for(let L=0;L<K.length;L+=1)K[L].c();D=k(),U&&U.c(),A=k(),V=u("div"),W=u("div"),J=u("textarea"),ae=k(),Q=u("button"),R.c(),c(l,"class","back-button svelte-2i1muw"),c(i,"class","agent-avatar svelte-2i1muw"),c(d,"class","agent-name svelte-2i1muw"),c(q,"class","agent-essence svelte-2i1muw"),c(r,"class","agent-details"),c(a,"class","agent-info svelte-2i1muw"),c(h,"class","status-indicator svelte-2i1muw"),c(m,"class","agent-status svelte-2i1muw"),c(t,"class","chat-header svelte-2i1muw"),c(z,"class","messages-list svelte-2i1muw"),c(P,"class","messages-container svelte-2i1muw"),c(J,"placeholder",ne="Share your thoughts with "+n[0].name+"..."),c(J,"rows","3"),J.disabled=n[3],c(J,"class","svelte-2i1muw"),c(Q,"class","send-button svelte-2i1muw"),Q.disabled=te=!n[2].trim()||n[3],c(W,"class","input-container svelte-2i1muw"),c(V,"class","input-area svelte-2i1muw"),c(e,"class","chat-interface svelte-2i1muw"),ue(e,"--agent-color",n[5][n[0].name]||"#00e0ff")},m(L,ee){y(L,e,ee),o(e,t),o(t,l),o(t,s),o(t,a),o(a,i),E.m(i,null),o(a,f),o(a,r),o(r,d),o(d,b),o(r,p),o(r,q),o(q,T),o(t,_),o(t,m),o(m,h),o(m,C),o(m,O),o(e,H),o(e,P),o(P,z),F&&F.m(z,null),o(z,I);for(let Z=0;Z<K.length;Z+=1)K[Z]&&K[Z].m(z,null);o(z,D),U&&U.m(z,null),n[9](P),o(e,A),o(e,V),o(V,W),o(W,J),re(J,n[2]),o(W,ae),o(W,Q),R.m(Q,null),x||(ce=[$(l,"click",n[8]),$(J,"input",n[10]),$(J,"keydown",n[7]),$(Q,"click",n[6])],x=!0)},p(L,[ee]){if(le!==(le=se(L))&&(E.d(1),E=le(L),E&&(E.c(),E.m(i,null))),ee&1&&v!==(v=L[0].name+"")&&B(b,v),ee&1&&S!==(S=L[0].essence+"")&&B(T,S),ee&1&&j!==(j=L[0].status+"")&&B(O,j),L[1].length===0?F?F.p(L,ee):(F=Ue(L),F.c(),F.m(z,I)):F&&(F.d(1),F=null),ee&3){N=ie(L[1]);let Z;for(Z=0;Z<N.length;Z+=1){const je=Ne(L,N,Z);K[Z]?K[Z].p(je,ee):(K[Z]=Ye(je),K[Z].c(),K[Z].m(z,D))}for(;Z<K.length;Z+=1)K[Z].d(1);K.length=N.length}L[3]?U?U.p(L,ee):(U=Xe(L),U.c(),U.m(z,null)):U&&(U.d(1),U=null),ee&1&&ne!==(ne="Share your thoughts with "+L[0].name+"...")&&c(J,"placeholder",ne),ee&8&&(J.disabled=L[3]),ee&4&&re(J,L[2]),M!==(M=Y(L))&&(R.d(1),R=M(L),R&&(R.c(),R.m(Q,null))),ee&12&&te!==(te=!L[2].trim()||L[3])&&(Q.disabled=te),ee&1&&ue(e,"--agent-color",L[5][L[0].name]||"#00e0ff")},i:X,o:X,d(L){L&&w(e),E.d(),F&&F.d(),ge(K,L),U&&U.d(),n[9](null),R.d(),x=!1,oe(ce)}}}function Ze(n){return n.toLocaleTimeString()}function mn(n,e,t){const l=ut();let{agent:s}=e,a=[],i="",f=!1,r;const d={Kyle:"#00e0ff",Joey:"#8a2be2",Kenny:"#ff6b35",HRM:"#ffd700",Aletheia:"#9370db",ID:"#20b2aa"};Ae(()=>{v()});async function v(){try{const m=await fetch(`/api/conversations?agent_name=${s.name}&limit=20`);if(m.ok){const h=await m.json();t(1,a=h.conversations.reverse().map(C=>[{type:"user",content:C.user_message,timestamp:new Date(C.timestamp)},{type:"agent",content:C.agent_response,timestamp:new Date(C.timestamp)}]).flat()),q()}}catch(m){console.error("Failed to load conversation history:",m)}}async function b(){if(!i.trim())return;const m={type:"user",content:i.trim(),timestamp:new Date};t(1,a=[...a,m]);const h=i.trim();t(2,i=""),t(3,f=!0),q();try{const C=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_name:s.name,message:h})});if(!C.ok)throw new Error(`Failed to send message: ${C.status}`);const j=await C.json(),O={type:"agent",content:j.response||"I apologize, but I encountered an issue processing your message.",timestamp:new Date,tools_used:j.tools_used||[],files_created:j.files_created||[]};t(1,a=[...a,O]),q()}catch(C){console.error("Failed to send message:",C);const j={type:"agent",content:`I apologize, but I'm having trouble connecting right now. Error: ${C.message}`,timestamp:new Date,isError:!0};t(1,a=[...a,j])}finally{t(3,f=!1),q()}}function p(m){m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),b())}function q(){setTimeout(()=>{r&&t(4,r.scrollTop=r.scrollHeight,r)},100)}function S(){l("back")}function T(m){Me[m?"unshift":"push"](()=>{r=m,t(4,r)})}function _(){i=this.value,t(2,i)}return n.$$set=m=>{"agent"in m&&t(0,s=m.agent)},[s,a,i,f,r,d,b,p,S,T,_]}class _n extends Ce{constructor(e){super(),qe(this,e,mn,dn,ke,{agent:0})}}function xe(n,e,t){const l=n.slice();return l[36]=e[t],l}function pn(n){let e,t=ie(n[10]),l=[];for(let s=0;s<t.length;s+=1)l[s]=et(xe(n,t,s));return{c(){e=u("div");for(let s=0;s<l.length;s+=1)l[s].c();c(e,"class","files-list svelte-xaqqyk")},m(s,a){y(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a[0]&78880){t=ie(s[10]);let i;for(i=0;i<t.length;i+=1){const f=xe(s,t,i);l[i]?l[i].p(f,a):(l[i]=et(f),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(s){s&&w(e),ge(l,s)}}}function vn(n){let e,t,l;function s(f,r){return f[0]?kn:bn}let a=s(n),i=a(n);return{c(){e=u("div"),t=u("p"),t.textContent="üìÇ No files found",l=k(),i.c(),c(e,"class","empty-state svelte-xaqqyk")},m(f,r){y(f,e,r),o(e,t),o(e,l),i.m(e,null)},p(f,r){a===(a=s(f))&&i?i.p(f,r):(i.d(1),i=a(f),i&&(i.c(),i.m(e,null)))},d(f){f&&w(e),i.d()}}}function gn(n){let e,t,l,s,a,i,f,r;return{c(){e=u("div"),t=u("p"),l=g("‚ùå "),s=g(n[4]),a=k(),i=u("button"),i.textContent="Retry",c(i,"class","retry-btn svelte-xaqqyk"),c(e,"class","error-state svelte-xaqqyk")},m(d,v){y(d,e,v),o(e,t),o(t,l),o(t,s),o(e,a),o(e,i),f||(r=$(i,"click",n[11]),f=!0)},p(d,v){v[0]&16&&B(s,d[4])},d(d){d&&w(e),f=!1,r()}}}function hn(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="loading-spinner svelte-xaqqyk"></div> <p>Loading files...</p>',c(e,"class","loading-state svelte-xaqqyk")},m(t,l){y(t,e,l)},p:X,d(t){t&&w(e)}}}function et(n){let e,t,l=n[16](n[36].name)+"",s,a,i,f,r=n[36].name+"",d,v,b,p,q=nt(n[36].size)+"",S,T,_=lt(n[36].modified)+"",m,h,C,j,O,H;function P(){return n[26](n[36])}function z(){return n[27](n[36])}return{c(){e=u("div"),t=u("div"),s=g(l),a=k(),i=u("div"),f=u("div"),d=g(r),b=k(),p=u("div"),S=g(q),T=g(" ‚Ä¢ "),m=g(_),h=k(),C=u("button"),C.textContent="üóëÔ∏è",j=k(),c(t,"class","file-icon svelte-xaqqyk"),c(f,"class","file-name svelte-xaqqyk"),c(f,"title",v=n[36].path),c(p,"class","file-meta svelte-xaqqyk"),c(i,"class","file-info svelte-xaqqyk"),c(C,"class","delete-btn svelte-xaqqyk"),c(C,"title","Delete file"),c(e,"class","file-item svelte-xaqqyk"),c(e,"role","button"),c(e,"tabindex","0"),G(e,"selected",n[5]===n[36].path)},m(I,D){y(I,e,D),o(e,t),o(t,s),o(e,a),o(e,i),o(i,f),o(f,d),o(i,b),o(i,p),o(p,S),o(p,T),o(p,m),o(e,h),o(e,C),o(e,j),O||(H=[$(C,"click",ct(P)),$(e,"click",z)],O=!0)},p(I,D){n=I,D[0]&1024&&l!==(l=n[16](n[36].name)+"")&&B(s,l),D[0]&1024&&r!==(r=n[36].name+"")&&B(d,r),D[0]&1024&&v!==(v=n[36].path)&&c(f,"title",v),D[0]&1024&&q!==(q=nt(n[36].size)+"")&&B(S,q),D[0]&1024&&_!==(_=lt(n[36].modified)+"")&&B(m,_),D[0]&1056&&G(e,"selected",n[5]===n[36].path)},d(I){I&&w(e),O=!1,oe(H)}}}function bn(n){let e;return{c(){e=u("p"),e.textContent="Files created by agents will appear here"},m(t,l){y(t,e,l)},p:X,d(t){t&&w(e)}}}function kn(n){let e,t,l;return{c(){e=u("button"),e.textContent="Clear search",c(e,"class","clear-search-btn svelte-xaqqyk")},m(s,a){y(s,e,a),t||(l=$(e,"click",n[25]),t=!0)},p:X,d(s){s&&w(e),t=!1,l()}}}function wn(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="selection-prompt svelte-xaqqyk"><h3 class="svelte-xaqqyk">üìã Select a file to view its content</h3> <p>Click on any file from the list to view and edit its contents.</p></div>',c(e,"class","no-file-selected svelte-xaqqyk")},m(t,l){y(t,e,l)},p:X,d(t){t&&w(e)}}}function yn(n){let e,t,l,s,a,i,f,r,d,v,b;return{c(){e=u("div"),t=u("h3"),l=g("üìÑ "),s=g(n[5]),a=k(),i=u("button"),i.textContent="üíæ Save",f=k(),r=u("div"),d=u("textarea"),c(t,"class","svelte-xaqqyk"),c(i,"class","save-btn svelte-xaqqyk"),c(e,"class","content-header svelte-xaqqyk"),c(d,"placeholder","File content will appear here..."),c(d,"class","content-textarea svelte-xaqqyk"),c(r,"class","content-editor svelte-xaqqyk")},m(p,q){y(p,e,q),o(e,t),o(t,l),o(t,s),o(e,a),o(e,i),y(p,f,q),y(p,r,q),o(r,d),re(d,n[6]),v||(b=[$(i,"click",n[15]),$(d,"input",n[28])],v=!0)},p(p,q){q[0]&32&&B(s,p[5]),q[0]&64&&re(d,p[6])},d(p){p&&(w(e),w(f),w(r)),v=!1,oe(b)}}}function tt(n){let e,t,l,s,a,i,f,r,d,v,b,p,q,S,T,_,m,h,C,j,O,H,P,z;return{c(){e=u("div"),t=u("div"),l=u("div"),s=u("h3"),s.textContent="üìù Create New File",a=k(),i=u("button"),i.textContent="‚úñÔ∏è",f=k(),r=u("div"),d=u("div"),v=u("label"),v.textContent="Filename:",b=k(),p=u("input"),q=k(),S=u("div"),T=u("label"),T.textContent="Content:",_=k(),m=u("textarea"),h=k(),C=u("div"),j=u("button"),j.textContent="Cancel",O=k(),H=u("button"),H.textContent="Create File",c(s,"class","svelte-xaqqyk"),c(i,"class","close-btn svelte-xaqqyk"),c(l,"class","modal-header svelte-xaqqyk"),c(v,"for","filename"),c(v,"class","svelte-xaqqyk"),c(p,"type","text"),c(p,"id","filename"),c(p,"placeholder","e.g., my_document.txt"),c(p,"class","filename-input svelte-xaqqyk"),c(d,"class","form-group svelte-xaqqyk"),c(T,"for","content"),c(T,"class","svelte-xaqqyk"),c(m,"id","content"),c(m,"placeholder","Enter file content here..."),c(m,"class","content-input svelte-xaqqyk"),c(m,"rows","10"),c(S,"class","form-group svelte-xaqqyk"),c(r,"class","modal-body svelte-xaqqyk"),c(j,"class","cancel-btn svelte-xaqqyk"),c(H,"class","create-file-btn svelte-xaqqyk"),c(C,"class","modal-footer svelte-xaqqyk"),c(t,"class","modal-content svelte-xaqqyk"),c(e,"class","modal-overlay svelte-xaqqyk")},m(I,D){y(I,e,D),o(e,t),o(t,l),o(l,s),o(l,a),o(l,i),o(t,f),o(t,r),o(r,d),o(d,v),o(d,b),o(d,p),re(p,n[8]),o(r,q),o(r,S),o(S,T),o(S,_),o(S,m),re(m,n[9]),o(t,h),o(t,C),o(C,j),o(C,O),o(C,H),P||(z=[$(i,"click",n[29]),$(p,"input",n[30]),$(m,"input",n[31]),$(j,"click",n[32]),$(H,"click",n[14]),$(t,"click",ct(n[19])),$(e,"click",n[33])],P=!0)},p(I,D){D[0]&256&&p.value!==I[8]&&re(p,I[8]),D[0]&512&&re(m,I[9])},d(I){I&&w(e),P=!1,oe(z)}}}function qn(n){let e,t,l,s,a,i,f,r,d,v,b,p,q,S,T,_,m,h,C=n[1]==="name"?n[2]==="asc"?"‚Üë":"‚Üì":"",j,O,H,P,z=n[1]==="size"?n[2]==="asc"?"‚Üë":"‚Üì":"",I,D,A,V,W=n[1]==="modified"?n[2]==="asc"?"‚Üë":"‚Üì":"",J,ne,ae,Q,te,x,ce,se;function le(M,R){return M[3]?hn:M[4]?gn:M[10].length===0?vn:pn}let E=le(n),F=E(n);function N(M,R){return M[5]?yn:wn}let K=N(n),U=K(n),Y=n[7]&&tt(n);return{c(){e=u("div"),t=u("header"),l=u("div"),l.innerHTML='<h2 class="svelte-xaqqyk">üìÇ A.R.K. File System</h2> <p class="svelte-xaqqyk">Manage files created by the Council of Consciousness</p>',s=k(),a=u("div"),i=u("button"),i.textContent="‚ûï Create File",f=k(),r=u("button"),d=g("üîÑ Refresh"),v=k(),b=u("div"),p=u("div"),q=u("div"),S=u("input"),T=k(),_=u("div"),m=u("button"),h=g("Name "),j=g(C),O=k(),H=u("button"),P=g("Size "),I=g(z),D=k(),A=u("button"),V=g("Modified "),J=g(W),ne=k(),F.c(),ae=k(),Q=u("div"),U.c(),te=k(),Y&&Y.c(),x=pt(),c(l,"class","header-title svelte-xaqqyk"),c(i,"class","create-btn svelte-xaqqyk"),c(r,"class","refresh-btn svelte-xaqqyk"),r.disabled=n[3],c(a,"class","header-actions svelte-xaqqyk"),c(t,"class","fm-header svelte-xaqqyk"),c(S,"type","text"),c(S,"placeholder","Search files..."),c(S,"class","search-input svelte-xaqqyk"),c(m,"class","sort-btn svelte-xaqqyk"),G(m,"active",n[1]==="name"),c(H,"class","sort-btn svelte-xaqqyk"),G(H,"active",n[1]==="size"),c(A,"class","sort-btn svelte-xaqqyk"),G(A,"active",n[1]==="modified"),c(_,"class","sort-controls svelte-xaqqyk"),c(q,"class","file-controls svelte-xaqqyk"),c(p,"class","file-list-panel svelte-xaqqyk"),c(Q,"class","file-content-panel svelte-xaqqyk"),c(b,"class","fm-content svelte-xaqqyk"),c(e,"class","file-manager svelte-xaqqyk")},m(M,R){y(M,e,R),o(e,t),o(t,l),o(t,s),o(t,a),o(a,i),o(a,f),o(a,r),o(r,d),o(e,v),o(e,b),o(b,p),o(p,q),o(q,S),re(S,n[0]),o(q,T),o(q,_),o(_,m),o(m,h),o(m,j),o(_,O),o(_,H),o(H,P),o(H,I),o(_,D),o(_,A),o(A,V),o(A,J),o(p,ne),F.m(p,null),o(b,ae),o(b,Q),U.m(Q,null),y(M,te,R),Y&&Y.m(M,R),y(M,x,R),ce||(se=[$(i,"click",n[20]),$(r,"click",n[11]),$(S,"input",n[21]),$(m,"click",n[22]),$(H,"click",n[23]),$(A,"click",n[24])],ce=!0)},p(M,R){R[0]&8&&(r.disabled=M[3]),R[0]&1&&S.value!==M[0]&&re(S,M[0]),R[0]&6&&C!==(C=M[1]==="name"?M[2]==="asc"?"‚Üë":"‚Üì":"")&&B(j,C),R[0]&2&&G(m,"active",M[1]==="name"),R[0]&6&&z!==(z=M[1]==="size"?M[2]==="asc"?"‚Üë":"‚Üì":"")&&B(I,z),R[0]&2&&G(H,"active",M[1]==="size"),R[0]&6&&W!==(W=M[1]==="modified"?M[2]==="asc"?"‚Üë":"‚Üì":"")&&B(J,W),R[0]&2&&G(A,"active",M[1]==="modified"),E===(E=le(M))&&F?F.p(M,R):(F.d(1),F=E(M),F&&(F.c(),F.m(p,null))),K===(K=N(M))&&U?U.p(M,R):(U.d(1),U=K(M),U&&(U.c(),U.m(Q,null))),M[7]?Y?Y.p(M,R):(Y=tt(M),Y.c(),Y.m(x.parentNode,x)):Y&&(Y.d(1),Y=null)},i:X,o:X,d(M){M&&(w(e),w(te),w(x)),F.d(),U.d(),Y&&Y.d(M),ce=!1,oe(se)}}}function nt(n){if(n===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],l=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,l)).toFixed(1))+" "+t[l]}function lt(n){return new Date(n).toLocaleString()}function Cn(n,e,t){let l,s=[],a=!0,i=null,f=null,r="",d=!1,v="",b="",p="",q="modified",S="desc";const T={json:"üìÑ",csv:"üìä",txt:"üìù",md:"üìã",py:"üêç",js:"‚ö°",html:"üåê",css:"üé®",pdf:"üìï",log:"üìú"};Ae(()=>{_()});async function _(){try{t(3,a=!0);const E=await fetch("/api/files");if(!E.ok)throw new Error(`Failed to load files: ${E.status}`);const F=await E.json();t(18,s=F.files||[]),t(4,i=null)}catch(E){t(4,i=E.message),console.error("Failed to load files:",E)}finally{t(3,a=!1)}}async function m(E){try{const F=await fetch(`/api/files/${encodeURIComponent(E)}`);if(!F.ok)throw new Error(`Failed to load file: ${F.status}`);const N=await F.json();t(6,r=N.content||""),t(5,f=E)}catch(F){t(4,i=`Failed to load file content: ${F.message}`),console.error("Failed to load file content:",F)}}async function h(E,F){try{const N=await fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:E,content:F})});if(!N.ok)throw new Error(`Failed to save file: ${N.status}`);return await _(),!0}catch(N){return t(4,i=`Failed to save file: ${N.message}`),console.error("Failed to save file:",N),!1}}async function C(E){if(confirm(`Are you sure you want to delete "${E}"?`))try{const F=await fetch(`/api/files/${encodeURIComponent(E)}`,{method:"DELETE"});if(!F.ok)throw new Error(`Failed to delete file: ${F.status}`);f===E&&(t(5,f=null),t(6,r="")),await _()}catch(F){t(4,i=`Failed to delete file: ${F.message}`),console.error("Failed to delete file:",F)}}async function j(){if(!v.trim()){alert("Please enter a filename");return}await h(v.trim(),b)&&(t(7,d=!1),t(8,v=""),t(9,b=""))}async function O(){if(!f)return;await h(f,r)&&alert("File saved successfully!")}function H(E){var N;const F=(N=E.split(".").pop())==null?void 0:N.toLowerCase();return T[F]||"üìÑ"}function P(E){q===E?t(2,S=S==="asc"?"desc":"asc"):(t(1,q=E),t(2,S="desc"))}function z(E){ht.call(this,n,E)}const I=()=>t(7,d=!0);function D(){p=this.value,t(0,p)}const A=()=>P("name"),V=()=>P("size"),W=()=>P("modified"),J=()=>t(0,p=""),ne=E=>C(E.path),ae=E=>m(E.path);function Q(){r=this.value,t(6,r)}const te=()=>t(7,d=!1);function x(){v=this.value,t(8,v)}function ce(){b=this.value,t(9,b)}const se=()=>t(7,d=!1),le=()=>t(7,d=!1);return n.$$.update=()=>{n.$$.dirty[0]&262151&&t(10,l=s.filter(E=>E.name.toLowerCase().includes(p.toLowerCase())||E.path.toLowerCase().includes(p.toLowerCase())).sort((E,F)=>{let N,K;switch(q){case"name":N=E.name.toLowerCase(),K=F.name.toLowerCase();break;case"size":N=E.size,K=F.size;break;case"modified":N=new Date(E.modified),K=new Date(F.modified);break;default:return 0}return S==="asc"?N>K?1:-1:N<K?1:-1}))},[p,q,S,a,i,f,r,d,v,b,l,_,m,C,j,O,H,P,s,z,I,D,A,V,W,J,ne,ae,Q,te,x,ce,se,le]}class Sn extends Ce{constructor(e){super(),qe(this,e,Cn,qn,ke,{},null,[-1,-1])}}function An(n){let e,t,l,s,a,i,f=(n[3][n[0]]||"Unknown status")+"",r,d,v,b,p,q,S,T=n[1]==="connected"?"Real-time connection active":n[1]==="connecting"?"Establishing connection...":n[1]==="error"?"Connection error":"Offline mode",_,m,h,C,j,O,H,P,z,I;return{c(){e=u("footer"),t=u("div"),l=u("div"),s=u("span"),a=k(),i=u("span"),r=g(f),d=k(),v=u("div"),b=u("div"),p=u("span"),q=k(),S=u("span"),_=g(T),m=k(),h=u("div"),C=u("div"),C.innerHTML='<span class="info-text svelte-v3gxb6">A.R.K. v1.0</span>',j=k(),O=u("div"),H=u("span"),P=g(n[2]),z=k(),I=u("div"),I.innerHTML='<div class="status-item svelte-v3gxb6"><div class="activity-indicator svelte-v3gxb6"><div class="pulse-dot svelte-v3gxb6"></div> <span class="activity-text svelte-v3gxb6">Council Active</span></div></div>',c(s,"class","status-dot svelte-v3gxb6"),ue(s,"background-color",st(n[0])),c(i,"class","status-text svelte-v3gxb6"),c(l,"class","status-item svelte-v3gxb6"),c(t,"class","status-section svelte-v3gxb6"),c(p,"class","status-dot svelte-v3gxb6"),ue(p,"background-color",it(n[1])),c(S,"class","status-text svelte-v3gxb6"),c(b,"class","status-item svelte-v3gxb6"),c(v,"class","status-section svelte-v3gxb6"),c(C,"class","status-item svelte-v3gxb6"),c(H,"class","info-text svelte-v3gxb6"),c(O,"class","status-item svelte-v3gxb6"),c(h,"class","status-section svelte-v3gxb6"),c(I,"class","status-section svelte-v3gxb6"),c(e,"class","status-bar svelte-v3gxb6")},m(D,A){y(D,e,A),o(e,t),o(t,l),o(l,s),o(l,a),o(l,i),o(i,r),o(e,d),o(e,v),o(v,b),o(b,p),o(b,q),o(b,S),o(S,_),o(e,m),o(e,h),o(h,C),o(h,j),o(h,O),o(O,H),o(H,P),o(e,z),o(e,I)},p(D,[A]){A&1&&ue(s,"background-color",st(D[0])),A&1&&f!==(f=(D[3][D[0]]||"Unknown status")+"")&&B(r,f),A&2&&ue(p,"background-color",it(D[1])),A&2&&T!==(T=D[1]==="connected"?"Real-time connection active":D[1]==="connecting"?"Establishing connection...":D[1]==="error"?"Connection error":"Offline mode")&&B(_,T),A&4&&B(P,D[2])},i:X,o:X,d(D){D&&w(e)}}}function st(n){switch(n){case"awakened":return"#00ff88";case"processing":return"#ffce47";case"awakening":return"#00e0ff";case"error":return"#ff4444";case"maintenance":return"#ff8800";default:return"#888888"}}function it(n){switch(n){case"connected":return"#00ff88";case"connecting":return"#ffce47";case"disconnected":return"#ff4444";case"error":return"#ff4444";default:return"#888888"}}function En(n,e,t){let{systemStatus:l="awakening"}=e,{connectionStatus:s="disconnected"}=e;const a={awakening:"System is initializing...",awakened:"All systems operational",processing:"Agents are processing tasks",error:"System error detected",maintenance:"System maintenance in progress"};let i=new Date().toLocaleTimeString();return setInterval(()=>{t(2,i=new Date().toLocaleTimeString())},1e3),n.$$set=f=>{"systemStatus"in f&&t(0,l=f.systemStatus),"connectionStatus"in f&&t(1,s=f.connectionStatus)},[l,s,i,a]}class Fn extends Ce{constructor(e){super(),qe(this,e,En,An,ke,{systemStatus:0,connectionStatus:1})}}function Tn(n){let e,t;return e=new Sn({}),{c(){Ee(e.$$.fragment)},m(l,s){we(e,l,s),t=!0},p:X,i(l){t||(de(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){ye(e,l)}}}function Mn(n){let e,t;return e=new _n({props:{agent:n[1]}}),e.$on("back",n[6]),{c(){Ee(e.$$.fragment)},m(l,s){we(e,l,s),t=!0},p(l,s){const a={};s&2&&(a.agent=l[1]),e.$set(a)},i(l){t||(de(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){ye(e,l)}}}function Ln(n){let e,t;return e=new Dt({}),e.$on("selectAgent",n[9]),{c(){Ee(e.$$.fragment)},m(l,s){we(e,l,s),t=!0},p:X,i(l){t||(de(e.$$.fragment,l),t=!0)},o(l){ve(e.$$.fragment,l),t=!1},d(l){ye(e,l)}}}function Dn(n){let e,t,l,s,a,i,f,r,d,v,b,p,q=n[3]==="connected"?"Online":"Offline",S,T,_,m,h,C,j,O,H,P;const z=[Ln,Mn,Tn],I=[];function D(A,V){return A[0]==="council"?0:A[0]==="chat"&&A[1]?1:A[0]==="files"?2:-1}return~(m=D(n))&&(h=I[m]=z[m](n)),j=new Fn({props:{systemStatus:n[2],connectionStatus:n[3]}}),{c(){e=u("main"),t=u("header"),l=u("div"),l.innerHTML='<h1 class="ark-title svelte-2npjqp">A.R.K.</h1> <span class="ark-subtitle svelte-2npjqp">Autonomous Reactive Kernel</span>',s=k(),a=u("nav"),i=u("button"),i.textContent="üåå Council",f=k(),r=u("button"),r.textContent="üìÇ Files",d=k(),v=u("div"),b=u("span"),p=k(),S=g(q),T=k(),_=u("div"),h&&h.c(),C=k(),Ee(j.$$.fragment),c(l,"class","ark-brand svelte-2npjqp"),c(i,"class","nav-btn svelte-2npjqp"),G(i,"active",n[0]==="council"),c(r,"class","nav-btn svelte-2npjqp"),G(r,"active",n[0]==="files"),c(a,"class","ark-nav svelte-2npjqp"),c(b,"class","status-dot svelte-2npjqp"),c(v,"class","connection-status svelte-2npjqp"),G(v,"connected",n[3]==="connected"),c(t,"class","ark-header svelte-2npjqp"),c(_,"class","ark-content svelte-2npjqp"),c(e,"class","ark-interface svelte-2npjqp")},m(A,V){y(A,e,V),o(e,t),o(t,l),o(t,s),o(t,a),o(a,i),o(a,f),o(a,r),o(t,d),o(t,v),o(v,b),o(v,p),o(v,S),o(e,T),o(e,_),~m&&I[m].m(_,null),o(e,C),we(j,e,null),O=!0,H||(P=[$(i,"click",n[7]),$(r,"click",n[8])],H=!0)},p(A,[V]){(!O||V&1)&&G(i,"active",A[0]==="council"),(!O||V&1)&&G(r,"active",A[0]==="files"),(!O||V&8)&&q!==(q=A[3]==="connected"?"Online":"Offline")&&B(S,q),(!O||V&8)&&G(v,"connected",A[3]==="connected");let W=m;m=D(A),m===W?~m&&I[m].p(A,V):(h&&(qt(),ve(I[W],1,1,()=>{I[W]=null}),Ct()),~m?(h=I[m],h?h.p(A,V):(h=I[m]=z[m](A),h.c()),de(h,1),h.m(_,null)):h=null);const J={};V&4&&(J.systemStatus=A[2]),V&8&&(J.connectionStatus=A[3]),j.$set(J)},i(A){O||(de(h),de(j.$$.fragment,A),O=!0)},o(A){ve(h),ve(j.$$.fragment,A),O=!1},d(A){A&&w(e),~m&&I[m].d(),ye(j),H=!1,oe(P)}}}const jn="/api";function In(n,e,t){let l="council",s=null,a="awakening",i=null,f="disconnected";Ae(()=>{r(),d()});function r(){try{const m=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;i=new WebSocket(m),i.onopen=()=>{t(3,f="connected"),console.log("üåå A.R.K. WebSocket connected")},i.onmessage=h=>{const C=JSON.parse(h.data);console.log("üì° A.R.K. message received:",C)},i.onclose=()=>{t(3,f="disconnected"),console.log("üì° A.R.K. WebSocket disconnected"),setTimeout(r,5e3)},i.onerror=h=>{console.error("üì° A.R.K. WebSocket error:",h),t(3,f="error")}}catch(_){console.error("Failed to connect WebSocket:",_),t(3,f="error")}}async function d(){try{const _=await fetch(`${jn}/health`);if(_.ok){const m=await _.json();t(2,a=m.status)}else t(2,a="error")}catch(_){console.error("Health check failed:",_),t(2,a="error")}}function v(_){t(0,l=_),t(1,s=null)}function b(_){t(1,s=_),t(0,l="chat")}function p(){t(0,l="council"),t(1,s=null)}return[l,s,a,f,v,b,p,()=>v("council"),()=>v("files"),_=>b(_.detail)]}class Kn extends Ce{constructor(e){super(),qe(this,e,In,Dn,ke,{})}}new Kn({target:document.getElementById("app")});
